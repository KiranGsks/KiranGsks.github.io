<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>RetroTennis Screenshots</title>
  <link rel="icon" href="/assets/images/logo.png" type="image/png" sizes="48x48">

  <style>
    /* Theme variables - dark mode (default) */
    :root {
      --bg: #0f1720;
      --bg-start: #061021;
      --bg-end: #071428;
      --card: #1a2332;
      --text: #e6eef8;
      --muted: #9aa4b2;
      --accent: #7dd3fc;
      --border: rgba(255, 255, 255, 0.12);
    }

    /* Light mode */
    html[data-theme="light"] {
      --bg: #f5f8fb;
      --bg-start: #f5f8fb;
      --bg-end: #e8ecf1;
      --card: #ffffff;
      --text: #1a202c;
      --muted: #64748b;
      --accent: #0ea5e9;
      --border: rgba(0, 0, 0, 0.08);
    }

    /* System preference detection when no explicit theme set */
    @media (prefers-color-scheme: light) {
      html:not([data-theme]) {
        --bg: #f5f8fb;
        --bg-start: #f5f8fb;
        --bg-end: #e8ecf1;
        --card: #ffffff;
        --text: #1a202c;
        --muted: #64748b;
        --accent: #0ea5e9;
        --border: rgba(0, 0, 0, 0.08);
      }
    }

    html,
    body {
      min-height: 100%
    }

    body {
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      margin: 0;
      background: linear-gradient(180deg, var(--bg-start) 0%, var(--bg-end) 100%);
      color: var(--text);
      max-width: 1200px;
      margin-inline: auto;
      padding: 18px;
      min-height: 100vh;
      transition: background 0.3s ease, color 0.3s ease
    }

    header {
      display: flex;
      align-items: center;
      gap: 14px;
      margin-bottom: 12px
    }

    h1 {
      font-size: 1.1rem;
      margin: 0;
      font-weight: 600
    }

    .note {
      font-size: 0.92rem;
      color: var(--muted);
      margin-top: 4px
    }

    /* Grid: responsive image gallery */
    .grid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      grid-template-rows: auto;
      grid-row-gap: 28px;
      grid-column-gap: 22px;
      padding: 20px 0;
      margin-bottom: 20px;
    }

    .card {
      display: inline-block;
      cursor: pointer;
      transition: all 0.3s ease;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 10px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    }

    .card:hover {
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
      transform: translateY(-2px);
      border-color: rgba(255, 255, 255, 0.18);
    }

    .card button {
      all: unset;
      cursor: pointer;
      display: block;
      width: 100%;
      text-align: left;
    }

    .thumb {
      width: 100%;
      height: 280px;
      object-fit: contain;
      object-position: center;
      border-radius: 6px;
      display: block;
      opacity: 1;
      transition: opacity 0.2s ease-in-out;
    }

    .card:hover .thumb {
      opacity: 0.9;
    }

    .filename {
      font-size: 0.9rem;
      margin-top: 10px;
      color: var(--muted);
      word-break: break-word;
      line-height: 1.3;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* Modal / Carousel */
    .modal {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.85);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      backdrop-filter: blur(6px);
      visibility: hidden;
      opacity: 0;
      transition: opacity .18s ease, visibility .18s
    }

    .modal.open {
      visibility: visible;
      opacity: 1
    }

    .viewer {
      position: relative;
      max-width: 94vw;
      max-height: 92vh;
      background: transparent;
      display: flex;
      align-items: center;
      justify-content: center
    }

    .stage {
      overflow: hidden;
      touch-action: none;
      display: flex;
      align-items: center;
      justify-content: center
    }

    .stage img {
      max-width: 100%;
      max-height: 100%;
      user-select: none;
      pointer-events: none;
      display: block
    }

    .controls {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: space-between;
      pointer-events: none
    }

    .nav-btn {
      pointer-events: auto;
      background: rgba(0, 0, 0, 0.36);
      border-radius: 999px;
      width: 48px;
      height: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text);
      border: 0;
      backdrop-filter: blur(4px);
      cursor: pointer
    }

    .nav-btn:active {
      transform: scale(.98)
    }

    .close {
      position: absolute;
      top: 16px;
      right: 18px;
      pointer-events: auto;
      background: transparent;
      border: 0;
      color: var(--muted);
      font-size: 22px;
      cursor: pointer
    }

    .caption {
      position: absolute;
      left: 18px;
      bottom: 18px;
      color: var(--muted);
      font-size: 0.9rem;
      word-break: break-word;
      max-width: calc(100% - 36px)
    }

    /* Action buttons */
    .rt-btn {
      display: inline-block;
      padding: 8px 10px;
      border-radius: 8px;
      background: var(--card);
      color: var(--text);
      text-decoration: none;
      font-weight: 600;
      border: 1px solid var(--border);
      font-size: 0.9rem;
      white-space: nowrap;
      transition: background 0.3s ease, border-color 0.3s ease
    }

    .rt-btn:hover {
      background: var(--border)
    }

    .rt-btn.primary {
      background: var(--accent);
      color: #ffffff;
      border-color: transparent
    }

    html[data-theme="light"] .rt-btn.primary {
      color: #052026
    }

    .header-buttons {
      display: flex;
      gap: 10px;
      align-items: center;
      flex-wrap: wrap
    }

    /* Theme toggle button */
    .theme-toggle {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 8px 10px;
      border-radius: 8px;
      background: var(--card);
      color: var(--text);
      border: 1px solid var(--border);
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      white-space: nowrap;
      font-family: inherit;
      transition: background 0.3s ease, border-color 0.3s ease
    }

    .theme-toggle:hover {
      background: var(--border)
    }

    .theme-toggle .icon {
      width: 18px;
      height: 18px;
      display: none
    }

    .theme-toggle[data-theme="system"] .icon-system {
      display: block
    }

    .theme-toggle[data-theme="dark"] .icon-dark {
      display: block
    }

    .theme-toggle[data-theme="light"] .icon-light {
      display: block
    }

    .theme-toggle span {
      font-size: 0.9rem
    }

    .notice {
      background: rgba(125, 211, 252, 0.06);
      border: 1px solid rgba(125, 211, 252, 0.1);
      padding: 12px;
      border-radius: 8px;
      color: var(--muted);
      transition: background 0.3s ease, border-color 0.3s ease
    }

    /* Responsive breakpoints following reference.txt pattern */
    @media only screen and (max-width:1456px) {
      .grid {
        grid-template-columns: repeat(4, 1fr)
      }

      .thumb {
        height: 300px
      }
    }

    @media only screen and (max-width:1024px) {
      .grid {
        grid-template-columns: repeat(3, 1fr)
      }

      .thumb {
        height: 320px
      }
    }

    @media only screen and (max-width:756px) {
      .grid {
        grid-template-columns: repeat(2, 1fr)
      }

      .thumb {
        height: 350px
      }

      body {
        padding: 12px
      }

      header {
        gap: 10px;
        margin-bottom: 10px
      }

      h1 {
        font-size: 1rem
      }

      .rt-btn {
        padding: 6px 8px;
        font-size: 0.85rem
      }

      .header-buttons {
        gap: 6px
      }
    }

    @media only screen and (max-width:496px) {
      .grid {
        grid-template-columns: repeat(1, 1fr)
      }

      .thumb {
        height: 400px
      }

      body {
        padding: 10px
      }

      h1 {
        font-size: 0.95rem
      }

      .nav-btn {
        width: 42px;
        height: 42px
      }

      .rt-btn {
        font-size: 0.8rem
      }

      .caption {
        font-size: 0.8rem;
        bottom: 12px;
        left: 12px
      }
    }

    /* Local site logo (page-level) */
    /* removed .site-logo - favicon used for browser tab only */
  </style>
  <header>
    <a href="../index.html" style="display:inline-flex;align-items:center;gap:10px;text-decoration:none;color:inherit">
      <h1 style="margin:0">RetroTennis - Screenshots</h1>
    </a>
    <div style="flex:1"></div>
    <div class="header-buttons">
      <a class="rt-btn" href="../index.html" title="Home">Home</a>
      <!-- Theme toggle button -->
      <button id="themeToggle" class="theme-toggle" aria-label="Toggle theme" title="Toggle theme">
        <!-- System icon (desktop + phone / gear-like) -->
        <svg class="icon icon-system" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"
          aria-hidden="true">
          <path d="M3 6h18M3 18h18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
            stroke-linejoin="round" />
          <rect x="7" y="8" width="10" height="8" rx="1" stroke="currentColor" stroke-width="1.5" fill="none" />
        </svg>

        <!-- Dark mode (moon) -->
        <svg class="icon icon-dark" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"
          aria-hidden="true">
          <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" stroke="currentColor" stroke-width="1.5"
            stroke-linecap="round" stroke-linejoin="round" />
        </svg>

        <!-- Light mode (sun) -->
        <svg class="icon icon-light" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"
          aria-hidden="true">
          <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="1.5" />
          <path
            d="M12 2v1.5M12 20.5V22M4.2 4.2l1.06 1.06M18.74 18.74l1.06 1.06M2 12h1.5M20.5 12H22M4.2 19.8l1.06-1.06M18.74 5.26l1.06-1.06"
            stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
        </svg>

        <span>Theme</span>
      </button>
    </div>
  </header>

<body>
  <div>
    <a class="rt-btn" href="https://youtube.com/shorts/0XOS0x1Ekic" target="_blank" rel="noopener"
      title="YouTube Short">Demo Short</a>
    <a class="rt-btn" href="https://www.youtube.com/shorts/cV7mmgu7l9E" target="_blank" rel="noopener"
      title="YouTube Short">Inspiration Short</a>
    <a class="rt-btn primary" href="https://play.google.com/apps/testing/vtz.rama.retrotennis" target="_blank"
      rel="noopener" title="Play Store Testing">Play Store</a>

  </div>
  <div class="note">Click an image to open the viewer. Use mouse wheel to zoom and drag to pan. Keyboard: ← → navigate,
    Esc close.</div>


  <div class="grid" id="gallery">
    <div class="card"><button data-src="./images/CompanionApp.png"><img class="thumb" src="./images/CompanionApp.png"
          alt="CompanionApp" loading="lazy" decoding="async">
        <div class="filename">CompanionApp.png</div>
      </button></div>
    <div class="card"><button data-src="./images/Monitisation_Scr.png"><img class="thumb"
          src="./images/Monitisation_Scr.png" alt="Monitisation_Scr" loading="lazy" decoding="async">
        <div class="filename">Monitisation_Scr.png</div>
      </button></div>
    <div class="card"><button data-src="./images/1 Home_Def.png"><img class="thumb" src="./images/1 Home_Def.png"
          alt="1 Home_Def" loading="lazy" decoding="async">
        <div class="filename">1 Home_Def.png</div>
      </button></div>
    <div class="card"><button data-src="./images/2 Home_ifPremium.png"><img class="thumb"
          src="./images/2 Home_ifPremium.png" alt="2 Home_ifPremium" loading="lazy" decoding="async">
        <div class="filename">2 Home_ifPremium.png</div>
      </button></div>
    <div class="card"><button data-src="./images/3 From_Settingsmenu.png"><img class="thumb"
          src="./images/3 From_Settingsmenu.png" alt="3 From_Settingsmenu" loading="lazy" decoding="async">
        <div class="filename">3 From_Settingsmenu.png</div>
      </button></div>
    <div class="card"><button data-src="./images/4 Arcade_Sub Menu.png"><img class="thumb"
          src="./images/4 Arcade_Sub Menu.png" alt="4 Arcade_Sub Menu" loading="lazy" decoding="async">
        <div class="filename">4 Arcade_Sub Menu.png</div>
      </button></div>
    <div class="card"><button data-src="./images/4 Retro_SubMenu.png"><img class="thumb"
          src="./images/4 Retro_SubMenu.png" alt="4 Retro_SubMenu" loading="lazy" decoding="async">
        <div class="filename">4 Retro_SubMenu.png</div>
      </button></div>
    <div class="card"><button data-src="./images/5 Hold_Calib.png"><img class="thumb" src="./images/5 Hold_Calib.png"
          alt="5 Hold_Calib" loading="lazy" decoding="async">
        <div class="filename">5 Hold_Calib.png</div>
      </button></div>
    <div class="card"><button data-src="./images/6 Pronation_Calib.png"><img class="thumb"
          src="./images/6 Pronation_Calib.png" alt="6 Pronation_Calib" loading="lazy" decoding="async">
        <div class="filename">6 Pronation_Calib.png</div>
      </button></div>
    <div class="card"><button data-src="./images/6 Up_Down_Calib.png"><img class="thumb"
          src="./images/6 Up_Down_Calib.png" alt="6 Up_Down_Calib" loading="lazy" decoding="async">
        <div class="filename">6 Up_Down_Calib.png</div>
      </button></div>
    <div class="card"><button data-src="./images/7 Blitz.png"><img class="thumb" src="./images/7 Blitz.png"
          alt="7 Blitz" loading="lazy" decoding="async">
        <div class="filename">7 Blitz.png</div>
      </button></div>
    <div class="card"><button data-src="./images/7 Power.png"><img class="thumb" src="./images/7 Power.png"
          alt="7 Power" loading="lazy" decoding="async">
        <div class="filename">7 Power.png</div>
      </button></div>
    <div class="card"><button data-src="./images/7 Retro.png"><img class="thumb" src="./images/7 Retro.png"
          alt="7 Retro" loading="lazy" decoding="async">
        <div class="filename">7 Retro.png</div>
      </button></div>
    <div class="card"><button data-src="./images/8 Smart_Pause_onmotion.png"><img class="thumb"
          src="./images/8 Smart_Pause_onmotion.png" alt="8 Smart_Pause_onmotion" loading="lazy" decoding="async">
        <div class="filename">8 Smart_Pause_onmotion.png</div>
      </button></div>
    <div class="card"><button data-src="./images/9 GameOver.png"><img class="thumb" src="./images/9 GameOver.png"
          alt="9 GameOver" loading="lazy" decoding="async">
        <div class="filename">9 GameOver.png</div>
      </button></div>
    <div class="card"><button data-src="./images/LeaderBoard_Stub.png"><img class="thumb"
          src="./images/LeaderBoard_Stub.png" alt="LeaderBoard_Stub" loading="lazy" decoding="async">
        <div class="filename">LeaderBoard_Stub.png</div>
      </button></div>
    <div class="card"><button data-src="./images/pronation.gif"><img class="thumb" src="./images/pronation.gif"
          alt="pronation" loading="lazy" decoding="async">
        <div class="filename">pronation.gif</div>
      </button></div>
  </div>
  <div style="margin-top:14px;max-width:820px" class="notice">
    <strong>Play Store testing / release note:</strong>
    <p style="margin:6px 0 0">We recently started Beta Testing.</p>
  </div>

  <!-- Modal viewer -->
  <div id="modal" class="modal" aria-hidden="true">
    <div class="viewer" role="dialog" aria-modal="true">
      <button class="close" id="closeBtn" aria-label="Close">✕</button>
      <div class="stage" id="stage" style="width:88vw;height:78vh">
        <img id="stageImg" src="" alt="">
      </div>
      <div class="controls">
        <div style="padding-left:12px"></div>
        <div style="padding-right:12px;display:flex;gap:8px;align-items:center">
          <button id="prevBtn" class="nav-btn" aria-label="Previous">◀</button>
          <button id="nextBtn" class="nav-btn" aria-label="Next">▶</button>
        </div>
      </div>
      <div class="caption" id="caption"></div>
    </div>
  </div>

  <script>
    // Utilities
    const $ = (sel, root = document) => root.querySelector(sel);
    const $$ = (sel, root = document) => Array.from(root.querySelectorAll(sel));

    document.addEventListener('DOMContentLoaded', () => {
      const gallery = $('#gallery');
      let items = $$('.card', gallery).map(card => card);

      // Sort alphabetically by filename text (case-insensitive)
      items.sort((a, b) => {
        const aText = (a.querySelector('.filename')?.textContent || '').toLowerCase();
        const bText = (b.querySelector('.filename')?.textContent || '').toLowerCase();
        return aText.localeCompare(bText);
      });
      // Re-append in sorted order
      items.forEach(n => gallery.appendChild(n));

      const buttons = $$('button[data-src]', gallery);
      const sources = buttons.map(b => b.dataset.src);

      // Modal elements
      const modal = $('#modal');
      const stage = $('#stage');
      const img = $('#stageImg');
      const caption = $('#caption');
      const prevBtn = $('#prevBtn');
      const nextBtn = $('#nextBtn');
      const closeBtn = $('#closeBtn');

      let state = {
        index: 0,
        scale: 1,
        tx: 0,
        ty: 0,
        dragging: false,
        lastX: 0,
        lastY: 0
      };

      function openAt(i) {
        state.index = (i + sources.length) % sources.length;
        loadCurrent(true);
        modal.classList.add('open');
        modal.setAttribute('aria-hidden', 'false');
        document.body.style.overflow = 'hidden';
      }

      function closeModal() {
        modal.classList.remove('open');
        modal.setAttribute('aria-hidden', 'true');
        document.body.style.overflow = '';
        resetTransform();
      }

      function loadCurrent(prefetch = false) {
        const src = sources[state.index];
        img.src = src;
        caption.textContent = src.split('/').pop();
        resetTransform();
        if (prefetch) {
          // prefetch neighbors
          const next = new Image(); next.src = sources[(state.index + 1) % sources.length];
          const prev = new Image(); prev.src = sources[(state.index - 1 + sources.length) % sources.length];
        }
      }

      function resetTransform() {
        state.scale = 1; state.tx = 0; state.ty = 0; applyTransform();
      }

      function applyTransform() {
        img.style.transform = `translate(${state.tx}px, ${state.ty}px) scale(${state.scale})`;
      }

      // Button wiring
      buttons.forEach((btn, i) => btn.addEventListener('click', () => openAt(i)));
      prevBtn.addEventListener('click', () => { state.index = (state.index - 1 + sources.length) % sources.length; loadCurrent(true); });
      nextBtn.addEventListener('click', () => { state.index = (state.index + 1) % sources.length; loadCurrent(true); });
      closeBtn.addEventListener('click', closeModal);

      // Click background to close (but not clicks on image area)
      modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(); });

      // Keyboard
      window.addEventListener('keydown', (e) => {
        if (!modal.classList.contains('open')) return;
        if (e.key === 'Escape') closeModal();
        if (e.key === 'ArrowLeft') { prevBtn.click(); }
        if (e.key === 'ArrowRight') { nextBtn.click(); }
      });

      // Pointer drag for pan and touch-swipe for navigation when unzoomed
      stage.addEventListener('pointerdown', (e)=>{
        stage.setPointerCapture(e.pointerId);
        // If this is a touch and image is not zoomed, start a potential swipe gesture.
        if(e.pointerType === 'touch' && state.scale === 1){
          state.swipe = { startX: e.clientX, startY: e.clientY, startT: Date.now() };
        } else {
          // normal pan start
          state.dragging = true; state.lastX = e.clientX; state.lastY = e.clientY;
          stage.style.cursor = 'grabbing';
        }
      });

      stage.addEventListener('pointermove', (e)=>{
        // If a potential swipe is active, detect vertical cancel and ignore pan until decision
        if(state.swipe){
          const dx = e.clientX - state.swipe.startX;
          const dy = e.clientY - state.swipe.startY;
          // If user moves mostly vertically, cancel swipe (likely a scroll intent)
          if(Math.abs(dy) > Math.abs(dx) && Math.abs(dy) > 10){ state.swipe = null; }
          return;
        }

        if(!state.dragging) return;
        const dx = e.clientX - state.lastX;
        const dy = e.clientY - state.lastY;
        state.lastX = e.clientX; state.lastY = e.clientY;
        // only pan when zoomed-in
        if(state.scale > 1){ state.tx += dx; state.ty += dy; applyTransform(); }
      });

      stage.addEventListener('pointerup', (e)=>{
        if(state.swipe){
          const dx = e.clientX - state.swipe.startX;
          const dy = e.clientY - state.swipe.startY;
          const dt = Date.now() - state.swipe.startT;
          // clear swipe state
          state.swipe = null;
          // threshold: horizontal motion, reasonably quick, and larger than vertical move
          if(Math.abs(dx) > 50 && Math.abs(dx) > Math.abs(dy) * 1.5 && dt < 600){
            if(dx > 0) prevBtn.click(); else nextBtn.click();
            stage.releasePointerCapture?.(e.pointerId);
            return;
          }
        }
        state.dragging = false; stage.style.cursor = 'default'; stage.releasePointerCapture?.(e.pointerId);
      });

      stage.addEventListener('pointercancel', ()=>{ state.dragging = false; state.swipe = null; stage.style.cursor = 'default'; });

      // Wheel zoom
      stage.addEventListener('wheel', (e) => {
        if (!modal.classList.contains('open')) return;
        e.preventDefault();
        const delta = -e.deltaY || e.wheelDelta;
        const zoomFactor = Math.exp(delta * 0.001); // smooth
        const newScale = Math.min(4, Math.max(0.5, state.scale * zoomFactor));
        // Adjust translate so the image keeps position under cursor (approx)
        const rect = img.getBoundingClientRect();
        const cx = e.clientX - rect.left; const cy = e.clientY - rect.top;
        const relX = (cx - state.tx) / state.scale; const relY = (cy - state.ty) / state.scale;
        state.scale = newScale;
        state.tx = cx - relX * state.scale;
        state.ty = cy - relY * state.scale;
        applyTransform();
      }, { passive: false });

      // Double click to toggle zoom reset
      stage.addEventListener('dblclick', () => {
        if (state.scale === 1) state.scale = 2.2; else resetTransform();
        applyTransform();
      });

      // Small accessibility: focus trapping and focus initial
      // Ensure modal buttons are focusable
      ['prevBtn', 'nextBtn', 'closeBtn'].forEach(id => { const el = $('#' + id); if (el) el.tabIndex = 0; });
    });
  </script>
  <script src="/assets/js/theme.js"></script>
</body>